{"version":3,"sources":["webpack:///src/pages/home/CartPage.vue","webpack:///./src/pages/home/CartPage.vue?70ac","webpack:///./src/pages/home/CartPage.vue"],"names":["CartPage","name","components","PayStepIndicator","data","multipleSelection","computed","extends_default","Object","vuex_esm","total","this","reduce","sum","product","price","amount","mounted","toggleSelection","items","methods","adjustAmount","currentValue","oldValue","item","adjustCartItems","removeItem","id","_this","removeCartItem","$nextTick","rows","_this2","forEach","row","$refs","cartTable","toggleRowSelection","clearSelection","goSettlement","setupSettlementBillWithDefaultValue","$router","push","handleSelectionChange","val","home_CartPage","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","ref","staticStyle","width","on","selection-change","type","fixed","show-overflow-tooltip","label","scopedSlots","_u","key","fn","scope","src","image","prop","sortable","size","min","max","value","change","newValue","_s","plain","click","$event","position","top","disabled","step","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.30f7549cb2f9db7ed9de.js","sourcesContent":["<template>\n  <div>\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"header\">\n        <span>我的购物车</span>\n        <span class=\"comment\">温馨提示：产品是否购买成功，以最终支付为准哦，请尽快完成结算</span>\n      </div>\n      <div class=\"content\">\n        <el-table :data=\"items\" ref=\"cartTable\" @selection-change=\"handleSelectionChange\" style=\"width: 100%\">\n          <el-table-column type=\"selection\" width=\"55\" fixed show-overflow-tooltip></el-table-column>\n          <el-table-column label=\"图片\" width=\"150\">\n            <template slot-scope=\"scope\">\n              <img :src=\"scope.row.image\" style=\"width: 120px\"/>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"title\" label=\"商品名称\" sortable></el-table-column>\n          <el-table-column prop=\"price\" label=\"单价\" width=\"100\" sortable></el-table-column>\n          <el-table-column label=\"数量\" width=\"170\" sortable>\n            <template slot-scope=\"scope\">\n              <el-input-number size=\"mini\" :min=\"0\" :max=\"10\" :value=\"scope.row.amount\"\n                               @change=\"(newValue,oldValue)=>{adjustAmount(scope.row,newValue,oldValue)}\"></el-input-number>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"小计\" width=\"120\" sortable>\n            <template slot-scope=\"scope\">\n              <span class=\"subtotal\">{{scope.row.price * scope.row.amount}} 元</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" width=\"120\">\n            <template slot-scope=\"scope\">\n              <el-button plain size=\"mini\" type=\"danger\" @click=\"removeItem(scope.row.id)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n        <div class=\"actions\">\n          {{`购物车中共计 ${items.length} 件商品，已选择其中 ${multipleSelection.length} 件`}}\n          <div class=\"total\">\n            总计： <span class=\"pay_price\">{{this.total}}</span> 元\n            <div class=\"pay_action\">\n              <el-button size=\"large\" type=\"primary\" style=\"position: relative; top: -6px\"\n                         :disabled=\"this.total<=0\" @click=\"goSettlement\">￥ 选好了，去结算\n              </el-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </el-card>\n    <PayStepIndicator :step=\"1\"/>\n  </div>\n</template>\n\n<script>\nimport {mapState, mapMutations, mapActions} from 'vuex'\nimport PayStepIndicator from '@/components/home/cart/PayStepIndicator'\n\nexport default {\n  name: 'CartPage',\n  components: {\n    PayStepIndicator\n  },\n  data () {\n    return {\n      multipleSelection: []\n    }\n  },\n  computed: {\n    ...mapState('cart', ['items']),\n    /**\n     * 商品总价\n     **/\n    total () {\n      return this.multipleSelection.reduce((sum, product) => sum + (product.price * product.amount), 0)\n    }\n  },\n  mounted () {\n    // 转载时默认全选所有商品\n    this.toggleSelection(this.items)\n  },\n  methods: {\n    ...mapMutations('cart', ['adjustCartItems', 'removeCartItem']),\n    ...mapActions('cart', ['setupSettlementBillWithDefaultValue']),\n    /**\n     * 调整购物车中产品的数量\n     */\n    adjustAmount (product, currentValue, oldValue) {\n      let item = {...product}\n      item.amount = currentValue - oldValue\n      this.adjustCartItems(item)\n    },\n    /**\n     * 删除购物车中的产品\n     **/\n    removeItem (id) {\n      this.removeCartItem(id)\n      // 删除后，原本选中的项目要继续保持选中\n      this.$nextTick(() => this.toggleSelection(this.items))\n    },\n    /**\n     * 选中购物车表格中指定商品\n     */\n    toggleSelection (rows) {\n      if (rows) {\n        rows.forEach(row => {\n          this.$refs.cartTable.toggleRowSelection(row)\n        })\n      } else {\n        this.$refs.cartTable.clearSelection()\n      }\n    },\n    /**\n     *转到结算页面付款\n     **/\n    goSettlement () {\n      this.setupSettlementBillWithDefaultValue({\n        items: this.multipleSelection\n      })\n      this.$router.push('/settle')\n    },\n    /**\n     * 维护表格选择集\n     */\n    handleSelectionChange (val) {\n      this.multipleSelection = val\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .subtotal {\n    color: red;\n    font-weight: bold;\n    font-size: 16px;\n  }\n\n  .total {\n    float: right;\n  }\n\n  .actions {\n    margin-top: 20px;\n    line-height: 32px\n  }\n\n  .pay_action {\n    display: inline-block;\n    width: 180px;\n    margin: 0 20px 10px 20px;\n  }\n\n  .pay_price {\n    color: red;\n    font-size: 32px;\n    font-weight: bold\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/home/CartPage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"我的购物车\")]),_vm._v(\" \"),_c('span',{staticClass:\"comment\"},[_vm._v(\"温馨提示：产品是否购买成功，以最终支付为准哦，请尽快完成结算\")])]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('el-table',{ref:\"cartTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.items},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\",\"fixed\":\"\",\"show-overflow-tooltip\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"图片\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{staticStyle:{\"width\":\"120px\"},attrs:{\"src\":scope.row.image}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"商品名称\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"price\",\"label\":\"单价\",\"width\":\"100\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"数量\",\"width\":\"170\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input-number',{attrs:{\"size\":\"mini\",\"min\":0,\"max\":10,\"value\":scope.row.amount},on:{\"change\":function (newValue,oldValue){_vm.adjustAmount(scope.row,newValue,oldValue)}}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"小计\",\"width\":\"120\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"subtotal\"},[_vm._v(_vm._s(scope.row.price * scope.row.amount)+\" 元\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"plain\":\"\",\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.removeItem(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"actions\"},[_vm._v(\"\\n        \"+_vm._s((\"购物车中共计 \" + (_vm.items.length) + \" 件商品，已选择其中 \" + (_vm.multipleSelection.length) + \" 件\"))+\"\\n        \"),_c('div',{staticClass:\"total\"},[_vm._v(\"\\n          总计： \"),_c('span',{staticClass:\"pay_price\"},[_vm._v(_vm._s(this.total))]),_vm._v(\" 元\\n          \"),_c('div',{staticClass:\"pay_action\"},[_c('el-button',{staticStyle:{\"position\":\"relative\",\"top\":\"-6px\"},attrs:{\"size\":\"large\",\"type\":\"primary\",\"disabled\":this.total<=0},on:{\"click\":_vm.goSettlement}},[_vm._v(\"￥ 选好了，去结算\\n            \")])],1)])])],1)]),_vm._v(\" \"),_c('PayStepIndicator',{attrs:{\"step\":1}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6879f722\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/home/CartPage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6879f722\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CartPage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CartPage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CartPage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6879f722\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CartPage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6879f722\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/home/CartPage.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}