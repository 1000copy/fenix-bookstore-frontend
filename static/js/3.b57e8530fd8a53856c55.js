webpackJsonp([3],{"3xuE":function(e,t){},P7ry:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),o=a("exGp"),s=a.n(o),i=a("Dd8w"),l=a.n(i),c=a("NYxO"),u=a("gyMJ"),p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("img",{staticClass:"logo",attrs:{src:a("lgL1")}}),e._v(" "),n("span",{staticClass:"title"},[e._v("Fenix's Bookstore")]),e._v(" "),n("el-form",{ref:"login-form",staticClass:"login-form",attrs:{model:e.authorization,rules:e.rules}},[n("el-form-item",{attrs:{prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入用户"},model:{value:e.authorization.name,callback:function(t){e.$set(e.authorization,"name",t)},expression:"authorization.name"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-user"})])],2)],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.authorization.password,callback:function(t){e.$set(e.authorization,"password",t)},expression:"authorization.password"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-unlock"})])],2)],1),e._v(" "),n("el-select",{staticStyle:{width:"370px"},attrs:{placeholder:"请选择语言"},model:{value:e.authorization.language,callback:function(t){e.$set(e.authorization,"language",t)},expression:"authorization.language"}},[n("el-option",{attrs:{label:"          中文",value:"zhCN"}}),e._v(" "),n("el-option",{attrs:{label:"          英文（无效，国际化预留）",value:"enUS"}}),e._v(" "),n("template",{slot:"prefix"},[n("div",{staticClass:"select-prefix"},[n("i",{staticClass:"el-icon-map-location"})])])],2),e._v(" "),n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-map-location"})]),e._v(" "),n("div",{staticClass:"actions"},[n("el-checkbox",{staticClass:"check",model:{value:e.authorization.rememberMe,callback:function(t){e.$set(e.authorization,"rememberMe",t)},expression:"authorization.rememberMe"}},[e._v("\n        自动登录\n      ")]),e._v(" "),n("el-button",{staticStyle:{float:"right",display:"inline-block",padding:"0 10px 0 0"},attrs:{type:"text"},on:{click:function(t){return e.$emit("changeMode")}}},[e._v("注册新用户\n      ")]),e._v(" "),n("el-button",{staticStyle:{width:"100%",display:"block",margin:"50px 0 0 0"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1),e._v(" "),n("hr"),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[e._v("\n      登录代表你已同意\n      "),n("el-tooltip",{attrs:{effect:"dark",content:"演示用途，并没有写",placement:"bottom"}},[n("el-button",{attrs:{type:"text"}},[e._v("用户协议")])],1),e._v("\n      和\n      "),n("el-tooltip",{attrs:{effect:"dark",content:"也是没有写",placement:"bottom"}},[n("el-button",{staticStyle:{"margin-left":"0"},attrs:{type:"text"}},[e._v("隐私政策")])],1)],1)],2)],1)},staticRenderFns:[]};var m=a("VU/8")({name:"LoginForm",data:function(){return{authorization:{name:"",password:"",language:"zhCN",rememberMe:!1},rules:{name:[{required:!0,message:"请输入用户名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{login:function(){var e=this;this.$refs["login-form"].validate(function(t){if(!t)return!1;e.$emit("login",e.authorization)})}}},p,!1,function(e){a("Y2ZQ")},"data-v-73f7116f",null).exports,d={name:"RegistrationForm",data:function(){return{account:{name:"",email:"",password:"",telephone:""},rules:{user:[{required:!0,message:"请填写用户名",trigger:"blur"}],name:[{required:!0,message:"请填写真实姓名",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"}],email:[{required:!0,message:"请填写邮箱",trigger:"blur"},{type:"email",message:"不符合邮箱格式",trigger:"blur"}],telephone:[{required:!0,message:"请填写手机",trigger:"blur"}]}}},methods:l()({},Object(c.d)("user",["setupSession"]),{registerAccount:function(){var e=this;this.$refs.account_form.validate(function(t){if(!t)return!1;e.submitRegistration()})},submitRegistration:function(){var e=this;return s()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.account.registerAccount(e.account);case 2:if(a=t.sent,(n=a.data).code!==u.a.constants.REMOTE_OPERATION_SUCCESS){t.next=14;break}return t.next=7,u.a.auth.login(e.account.name,e.account.password);case 7:if((n=t.sent.data).code!==u.a.constants.REMOTE_OPERATION_SUCCESS){t.next=14;break}return n.rememberMe=!1,n.language="zhCN",e.setupSession(n),e.$router.push("/"),t.abrupt("return");case 14:e.$message.error(n.message);case 15:case"end":return t.stop()}},t,e)}))()}})},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("img",{staticClass:"logo",attrs:{src:a("lgL1")}}),e._v(" "),n("span",{staticClass:"title"},[e._v("新用户注册")]),e._v(" "),n("el-form",{ref:"account_form",staticClass:"account_form",attrs:{model:e.account,rules:e.rules,"label-position":"left"}},[n("el-form-item",{attrs:{prop:"user"}},[n("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.account.user,callback:function(t){e.$set(e.account,"user",t)},expression:"account.user"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-user"})])],2)],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.account.password,callback:function(t){e.$set(e.account,"password",t)},expression:"account.password"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-unlock"})])],2)],1),e._v(" "),n("el-form-item",{attrs:{prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入真实姓名"},model:{value:e.account.name,callback:function(t){e.$set(e.account,"name",t)},expression:"account.name"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-user"})])],2)],1),e._v(" "),n("el-form-item",{attrs:{prop:"email"}},[n("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.account.email,callback:function(t){e.$set(e.account,"email",t)},expression:"account.email"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-receiving"})])],2)],1),e._v(" "),n("el-form-item",{attrs:{prop:"telephone"}},[n("el-input",{attrs:{placeholder:"请输入手机"},model:{value:e.account.telephone,callback:function(t){e.$set(e.account,"telephone",t)},expression:"account.telephone"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-phone-outline"})])],2)],1),e._v(" "),n("div",{staticClass:"actions"},[n("el-button",{staticClass:"action_button",attrs:{type:"primary"},on:{click:e.registerAccount}},[e._v("注册")]),e._v(" "),n("el-button",{staticClass:"action_button",on:{click:function(t){return e.$emit("changeMode")}}},[e._v("返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var f={name:"Login",components:{LoginForm:m,RegistrationForm:a("VU/8")(d,g,!1,function(e){a("3xuE")},"data-v-47d8b783",null).exports},data:function(){return{registrationMode:!1}},computed:{nextPath:function(){return this.$route.query.redirect?this.$route.query.redirect:"/"}},methods:l()({},Object(c.d)("user",["setupSession"]),{login:function(e){var t=this;return s()(r.a.mark(function a(){var n,o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.auth.login(e.name,e.password);case 2:if(n=a.sent,(o=n.data).code!==u.a.constants.REMOTE_OPERATION_SUCCESS){a.next=11;break}o.rememberMe=e.rememberMe,o.language=e.language,t.setupSession(o),t.$router.push(t.nextPath),a.next=12;break;case 11:throw new Error(o.message);case 12:case"end":return a.stop()}},a,t)}))()}})},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg"},[a("div",{staticClass:"dialog dialog-shadow"},[e.registrationMode?e._e():a("LoginForm",{on:{changeMode:function(t){e.registrationMode=!e.registrationMode},login:e.login}}),e._v(" "),e.registrationMode?a("RegistrationForm",{on:{changeMode:function(t){e.registrationMode=!e.registrationMode}}}):e._e()],1)])},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(e){a("goiG")},"data-v-c09dfc38",null);t.default=h.exports},Y2ZQ:function(e,t){},goiG:function(e,t){},lgL1:function(e,t,a){e.exports=a.p+"static/img/logo-color.5500ec5.png"}});
//# sourceMappingURL=3.b57e8530fd8a53856c55.js.map